---
title: 'Partition'
description: 'Documentation for Aryn SDK Partition'
---
import PartitionOptions from '/snippets/partition_options.mdx';

Please find the documentation for the Aryn SDK Partition module below. All parameters are optional unless specified otherwise.

## partition_file

Sends a file to Aryn DocParse and returns a Python dictionary with elements containing its document structure and text.

<AccordionGroup>

<Accordion title="Parameters">
- `file`: Required. A `file` opened in binary mode to parse or a path expressed as a `str` or a `PathLike` object specifying where the file to parse is.
<PartitionOptions />
<ul> <li> `aps_url`: A `string` specifying the URL of the Aryn DocParse endpoint. Default URL: "https://api.aryn.cloud/v1/document/partition". </li> </ul>
- `ssl_verify`: A `boolean` that controls whether the client verifies the SSL certificate of the chosen DocParse server. In Databricks, set this to `False` to fix SSL incompatibilities. ssl_verify is `True` by default, enforcing SSL verification.
- `aryn_api_key`: An Aryn API key, provided as a string. You can get one for free at [aryn.ai/get-started](https://www.aryn.ai/get-started). Default is `None` (aryn-sdk will look for it in the aryn_config parameter (which by default looks in ~/.aryn/config.yaml and and then in your environment variables (`ARYN_API_KEY` by default))).
- `aryn_config`: An ArynConfig object (defined in [aryn_sdk/config.py](https://github.com/aryn-ai/sycamore/blob/main/lib/aryn-sdk/aryn_sdk/config.py)), used for finding an api key. If aryn_api_key is set it will override this. The default ArynConfig looks in the env var `ARYN_API_KEY` and then in the file ~/.aryn/config.yaml. Default is None (aryn-sdk will look in the aryn_api_key parameter, in your environment variables, and then in ~/.aryn/config.yaml).
</Accordion>


<Accordion title="Return Value">

A dictionary containing keys `status` and `elements`. If output_format is `markdown`, returns a dictionary of `status` and `markdown`.
</Accordion>

<Accordion title="Example">

```python
from aryn_sdk.partition import partition_file

with open("my-favorite-pdf.pdf", "rb") as f:
    data = partition_file(
        f,
        aryn_api_key="MY-API-KEY",
        use_ocr=True,
        extract_table_structure=True,
        extract_images=True
    )
elements = data['elements']
```
</Accordion>

</AccordionGroup>

## convert_image_element

Convert an image element to a more usable format. If no format is specified, create a PIL Image object. If a format is specified, output the bytes of the image in that format. If `b64encode` is set to `True`, base64-encode the bytes and return them as a `string`.

<AccordionGroup>

<Accordion title="Parameters">
- `elem`: Required. An image element from the `elements` field of a `partition_file` response.
- `format`: A `string` specifying the format to output bytes to. Default is `PIL`.
- `b64encode`: A `boolean` that when set to True enables base64-encoding of the output bytes of this function. Format cannot be `PIL` when this option is `True`. Default is `False`.

</Accordion>


<Accordion title="Return Value">

Either a PIL `Image` object, bytes of an image, or a base64-encoded image as a `str`.

</Accordion>

<Accordion title="Example">
```python
from aryn_sdk.partition import partition_file, convert_image_element

with open("my-favorite-pdf.pdf", "rb") as f:
    data = partition_file(
        f,
        extract_images=True
    )
image_elts = [e for e in data['elements'] if e['type'] == 'Image']

pil_img = convert_image_element(image_elts[0])
jpg_bytes = convert_image_element(image_elts[1], format='JPEG')
png_str = convert_image_element(image_elts[2], format="PNG", b64encode=True)
```
</Accordion>

</AccordionGroup>

## draw_with_boxes

Create a list of images from the provided PDF, one for each page, with bounding boxes detected by the partitioner drawn on.

<AccordionGroup>

<Accordion title="Parameters">
- `pdf_file`: Required. A PDF file opened in binary mode or a path to a PDF file expressed as a `string` or a `PathLike` object upon which to draw.
-`partitioning_data`: Required. The output from `partition_file`.
- `draw_table_cells`: A boolean that when `True`, makes the function draw individually detected cells of tables. When `False`, the bounding boxes of table cells are not drawn but the outer bounding boxes of tables and the bounding boxes of all other elements are still drawn. Default is False.

</Accordion>


<Accordion title="Return Value">
A list of images of pages of the PDF, each with bounding boxes drawn on.

</Accordion>

<Accordion title="Example">
```python
from aryn_sdk.partition import partition_file, draw_with_boxes

with open("my-favorite-pdf.pdf", "rb") as f:
    data = partition_file(
        f,
        aryn_api_key="MY-ARYN-TOKEN",
        use_ocr=True,
        extract_table_structure=True,
        extract_images=True
    )
pages = draw_with_boxes("my-favorite-pdf.pdf", data, draw_table_cells=True)
```
</Accordion>

</AccordionGroup>

## table_elem_to_dataframe

Create a `pandas` DataFrame representing the tabular data inside the provided table element. If the element is not of type `table` or doesn't contain any table data, return `None` instead.

<AccordionGroup>

<Accordion title="Parameters">
- `elem`: Required. An element from the 'elements' field of a `partition_file` response.

</Accordion>


<Accordion title="Return Value">
A Pandas DataFrame representing the tabular data inside the provided table element. If the element is not of type 'table' or doesn't contain any table data, returns None instead.

</Accordion>

<Accordion title="Example">
```python
from aryn_sdk.partition import partition_file, table_elem_to_dataframe

with open("partition-me.pdf", "rb") as f:
    data = partition_file(
        f,
        use_ocr=True,
        extract_table_structure=True,
        extract_images=True
    )

# Find the first table and convert it to a dataframe
df = None
for element in data['elements']:
    if element['type'] == 'table':
        df = table_elem_to_dataframe(element)
        break
```
</Accordion>

</AccordionGroup>


## tables_to_pandas

For every table element in the provided partitioning response, create a pandas DataFrame representing the tabular data. Return a list containing all the elements, with tables paired with their corresponding DataFrames.


<AccordionGroup>

<Accordion title="Parameters">

- `data`: a response from `partition_file`

</Accordion>


<Accordion title="Return Value">

A list of tuples, where each tuple contains an element from the 'elements' field of a `partition_file` response and a Pandas DataFrame representing the tabular data inside the provided table element. If the element is not of type 'table' or doesn't contain any table data, the DataFrame will be `None`.

</Accordion>

<Accordion title="Example">
```python
from aryn_sdk.partition import partition_file, tables_to_pandas

with open("my-favorite-pdf.pdf", "rb") as f:
    data = partition_file(
        f,
        aryn_api_key="MY-ARYN-TOKEN",
        use_ocr=True,
        extract_table_structure=True,
        extract_images=True
    )
elts_and_dataframes = tables_to_pandas(data)
```
</Accordion>

</AccordionGroup>