# partition

[[aryn_sdk.partition.]{.pre}]{.sig-prename .descclassname}[[convert_image_element]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[elem]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[dict]{.pre}]{.n}*, *[[format]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[str]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[\'PIL\']{.pre}]{.default_value}*, *[[b64encode]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[bool]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*[)]{.sig-paren} [[→]{.sig-return-icon} [[Image]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[bytes]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[str]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[None]{.pre}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](../../../_modules/aryn_sdk/partition/partition.html#convert_image_element){.reference .internal}[¶](#aryn_sdk.partition.convert_image_element "Link to this definition"){.headerlink}

:   Convert an image element to a more useable format. If no format is
    specified, create a PIL Image object. If a format is specified,
    output the bytes of the image in that format. If b64encode is set to
    True, base64-encode the bytes and return them as a string.

    Parameters[:]{.colon}

    :   -   **elem** \-- an image element from the \'elements\' field of
            a [`partition_file`{.docutils .literal .notranslate}]{.pre}
            response

        -   **format** \-- an optional format to output bytes of.
            Default is PIL

        -   **b64encode** \-- base64-encode the output bytes. Format
            must be set to use this

    Example

    :::: {.highlight-python .notranslate}
    ::: highlight
        from aryn_sdk.partition import partition_file, convert_image

        with open("my-favorite-pdf.pdf", "rb") as f:
            data = partition_file(
                f,
                extract_images=True
            )
        image_elts = [e for e in data['elements'] if e['type'] == 'Image']

        pil_img = convert_image(image_elts[0])
        jpg_bytes = convert_image(image_elts[1], format='JPEG')
        png_str = convert_image(image_elts[2], format="PNG", b64encode=True)
    :::
    ::::

{/* */}

[[aryn_sdk.partition.]{.pre}]{.sig-prename .descclassname}[[draw_with_boxes]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[pdf_file]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[PathLike]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[BinaryIO]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[str]{.pre}]{.n}*, *[[partitioning_data]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[dict]{.pre}]{.n}*, *[[draw_table_cells]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[bool]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*[)]{.sig-paren} [[→]{.sig-return-icon} [[list]{.pre}[[\[]{.pre}]{.p}[Image]{.pre}[[\]]{.pre}]{.p}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](../../../_modules/aryn_sdk/partition/art.html#draw_with_boxes){.reference .internal}[¶](#aryn_sdk.partition.draw_with_boxes "Link to this definition"){.headerlink}

:   Create a list of images from the provided pdf, one for each page,
    with bounding boxes detected by the partitioner drawn on.

    Parameters[:]{.colon}

    :   -   **pdf_file** \-- an open file or path to a pdf file upon
            which to draw

        -   **partitioning_data** \-- the output from
            [`aryn_sdk.partition.partition_file`{.docutils .literal
            .notranslate}]{.pre}

        -   **draw_table_cells** \-- whether to draw individually
            detected cells of tables. default: False

    Returns[:]{.colon}

    :   a list of images of pages of the pdf, each with bounding boxes
        drawn on

    Example

    :::: {.highlight-python .notranslate}
    ::: highlight
        from aryn_sdk.partition import partition_file, draw_with_boxes

        with open("my-favorite-pdf.pdf", "rb") as f:
            data = partition_file(
                f,
                aryn_api_key="MY-ARYN-TOKEN",
                use_ocr=True,
                extract_table_structure=True,
                extract_images=True
            )
        pages = draw_with_boxes("my-favorite-pdf.pdf", data, draw_table_cells=True)
    :::
    ::::



[[aryn_sdk.partition.]{.pre}]{.sig-prename .descclassname}[[partition_file]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[file]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[BinaryIO]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[str]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[PathLike]{.pre}]{.n}*, *[[aryn_api_key]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[str]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[None]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[aryn_config]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ArynConfig]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[None]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[threshold]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[float]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[Literal]{.pre}[[\[]{.pre}]{.p}[[\'auto\']{.pre}]{.s}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[None]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[use_ocr]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[bool]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*, *[[ocr_images]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[bool]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*, *[[extract_table_structure]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[bool]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*, *[[table_extraction_options]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[dict]{.pre}[[\[]{.pre}]{.p}[str]{.pre}[[,]{.pre}]{.p}[ ]{.w}[Any]{.pre}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[{}]{.pre}]{.default_value}*, *[[extract_images]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[bool]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*, *[[selected_pages]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[list]{.pre}[[\[]{.pre}]{.p}[list]{.pre}[[\[]{.pre}]{.p}[int]{.pre}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[int]{.pre}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[None]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[aps_url]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[str]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[\'https://api.aryn.cloud/v1/document/partition\']{.pre}]{.default_value}*, *[[ssl_verify]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[bool]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[True]{.pre}]{.default_value}*, *[[output_format]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[str]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[None]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[→]{.sig-return-icon} [[dict]{.pre}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](../../../_modules/aryn_sdk/partition/partition.html#partition_file){.reference .internal}[¶](#aryn_sdk.partition.partition_file "Link to this definition"){.headerlink}

:   Sends file to the Aryn Partitioning Service and returns a dict of
    its document structure and text

    Parameters[:]{.colon}

    :   -   **file** \-- pdf file to partition

        -   **aryn_api_key** \-- aryn api key, provided as a string

        -   **aryn_config** \-- ArynConfig object, used for finding an
            api key. If aryn_api_key is set it will override this.
            default: The default ArynConfig looks in the env var
            ARYN_API_KEY and the file \~/.aryn/config.yaml

        -   **threshold** \-- value in to specify the cutoff for
            detecting bounding boxes. Must be set to \"auto\" or a
            floating point value between 0.0 and 1.0. default: None (APS
            will choose)

        -   **use_ocr** \-- extract text using an OCR model instead of
            extracting embedded text in PDF. default: False

        -   **ocr_images** \-- attempt to use OCR to generate a text
            representation of detected images. default: False

        -   **extract_table_structure** \-- extract tables and their
            structural content. default: False

        -   **table_extraction_options** \-- Specify options for table
            extraction, currently only supports boolean
            \'include_additional_text\': if table extraction is enabled,
            attempt to enhance the table structure by merging in tokens
            from text extraction. This can be useful for tables with
            missing or misaligned text, and is True by default.
            default: {"include_additional_text": True}

        -   **extract_images** \-- extract image contents. default:
            False

        -   **selected_pages** \-- list of individual pages (1-indexed)
            from the pdf to partition default: None

        -   **aps_url** \-- url of the Aryn Partitioning Service
            endpoint. default:
            \"[https://api.aryn.cloud/v1/document/partition](https://api.aryn.cloud/v1/document/partition){.reference
            .external}\"

        -   **ssl_verify** \-- verify ssl certificates. In databricks,
            set this to False to fix ssl imcompatibilities.

        -   **output_format** \-- controls output representation; can be
            set to markdown. default: None (JSON elements)

    Returns[:]{.colon}

    :   A dictionary containing \"status\" and \"elements\". If
        output_format is markdown, dictionary of \"status\" and
        \"markdown\".

    Example

    :::: {.highlight-python .notranslate}
    ::: highlight
        from aryn_sdk.partition import partition_file

        with open("my-favorite-pdf.pdf", "rb") as f:
            data = partition_file(
                f,
                aryn_api_key="MY-ARYN-TOKEN",
                use_ocr=True,
                extract_table_structure=True,
                extract_images=True
            )
        elements = data['elements']
    :::
    ::::


[[aryn_sdk.partition.]{.pre}]{.sig-prename .descclassname}[[table_elem_to_dataframe]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[elem]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[dict]{.pre}]{.n}*[)]{.sig-paren} [[→]{.sig-return-icon} [[DataFrame]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[None]{.pre}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](../../../_modules/aryn_sdk/partition/partition.html#table_elem_to_dataframe){.reference .internal}[¶](#aryn_sdk.partition.table_elem_to_dataframe "Link to this definition"){.headerlink}

:   Create a pandas DataFrame representing the tabular data inside the
    provided table element. If the element is not of type \'table\' or
    doesn\'t contain any table data, return None instead.

    Parameters[:]{.colon}

    :   **elem** \-- An element from the \'elements\' field of a
        [`partition_file`{.docutils .literal .notranslate}]{.pre}
        response.

    Example

    :::: {.highlight-python .notranslate}
    ::: highlight
        from aryn_sdk.partition import partition_file, table_elem_to_dataframe

        with open("partition-me.pdf", "rb") as f:
            data = partition_file(
                f,
                use_ocr=True,
                extract_table_structure=True,
                extract_images=True
            )

        # Find the first table and convert it to a dataframe
        df = None
        for element in data['elements']:
            if element['type'] == 'table':
                df = table_elem_to_dataframe(element)
                break
    :::
    ::::


[[aryn_sdk.partition.]{.pre}]{.sig-prename .descclassname}[[tables_to_pandas]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[data]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[dict]{.pre}]{.n}*[)]{.sig-paren} [[→]{.sig-return-icon} [[list]{.pre}[[\[]{.pre}]{.p}[tuple]{.pre}[[\[]{.pre}]{.p}[dict]{.pre}[[,]{.pre}]{.p}[ ]{.w}[DataFrame]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[None]{.pre}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}]{.sig-return-typehint}]{.sig-return}[[[\[source\]]{.pre}]{.viewcode-link}](../../../_modules/aryn_sdk/partition/partition.html#tables_to_pandas){.reference .internal}[¶](#aryn_sdk.partition.tables_to_pandas "Link to this definition"){.headerlink}

:   For every table element in the provided partitioning response,
    create a pandas DataFrame representing the tabular data. Return a
    list containing all the elements, with tables paired with their
    corresponding DataFrames.

    Parameters[:]{.colon}

    :   **data** \-- a response from [`partition_file`{.docutils
        .literal .notranslate}]{.pre}

    Example

    :::: {.highlight-python .notranslate}
    ::: highlight
        from aryn_sdk.partition import partition_file, tables_to_pandas

        with open("my-favorite-pdf.pdf", "rb") as f:
            data = partition_file(
                f,
                aryn_api_key="MY-ARYN-TOKEN",
                use_ocr=True,
                extract_table_structure=True,
                extract_images=True
            )
        elts_and_dataframes = tables_to_pandas(data)
    :::
    ::::
:::
:::::::::

:::::: related-pages
[![](data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iZnVyby1yZWxhdGVkLWljb24iPjx1c2UgaHJlZj0iI3N2Zy1hcnJvdy1yaWdodCIgLz48L3N2Zz4=){.furo-related-icon}](../aryn-sdk.html){.prev-page}

::::: page-info
::: context
Previous
:::

::: title
Aryn SDK
:::
:::::
::::::

:::::: bottom-of-page
:::: left-details
::: copyright
Copyright © 2024, Aryn Inc.
:::

Made with [Sphinx](https://www.sphinx-doc.org/) and
[\@pradyunsg](https://pradyunsg.me){.muted-link}\'s
[Furo](https://github.com/pradyunsg/furo)
::::

::: right-details
:::
::::::
::::::::::::::::::

:::::: {.toc-sticky .toc-scroll}
::: toc-title-container
[ On this page ]{.toc-title}
:::

:::: toc-tree-container
::: toc-tree
-   [partition](#){.reference .internal}
    -   [[`convert_image_element()`{.docutils .literal
        .notranslate}]{.pre}](#aryn_sdk.partition.convert_image_element){.reference
        .internal}
    -   [[`draw_with_boxes()`{.docutils .literal
        .notranslate}]{.pre}](#aryn_sdk.partition.draw_with_boxes){.reference
        .internal}
    -   [[`partition_file()`{.docutils .literal
        .notranslate}]{.pre}](#aryn_sdk.partition.partition_file){.reference
        .internal}
    -   [[`table_elem_to_dataframe()`{.docutils .literal
        .notranslate}]{.pre}](#aryn_sdk.partition.table_elem_to_dataframe){.reference
        .internal}
    -   [[`tables_to_pandas()`{.docutils .literal
        .notranslate}]{.pre}](#aryn_sdk.partition.tables_to_pandas){.reference
        .internal}
:::
::::
::::::
:::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::
